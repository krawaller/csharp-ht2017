<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Enter the build step</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="icon" type="image/x-icon" href="mc2/images/favicon.ico">

    <link rel="stylesheet" href="mc2/styles/reveal.css">
    <link rel="stylesheet" href="mc2/styles/theme.css" id="theme">
    <link rel="stylesheet" href="mc2/styles/code.css">
    <!--STARTCOURSESPECIFICSTYLES--><link rel="stylesheet" href="styles/stuff.css"><!--ENDCOURSESPECIFICSTYLES-->
  </head>

  <body>
    <div id="pos"></div>
    <div class="reveal">
      <div class="slides">
        <section class="slide chaptertitle">
          <div class="slidecontent">
            <div class="chapternumber"> chapter 4 of 6 </div>
            <h1>Enter the build step</h1>
            <span>Things&#39;re getting real</p>
</span>
          </div>
        </section>
        
        <!--STARTSECTIONINDEX--><section class="slide sectionlist">
  <div class="slidecontent">
    <h3>Sections in this chapter</h3>
    <ol>
    <li><a href="#/NaN">CSS&nbsp;preprocessing</a></li><li><a href="#/NaN">Exercise&nbsp;&#8209;&nbsp;LESS</a></li><li><a href="#/NaN">Package.JSON</a></li><li><a href="#/NaN">Exercise&nbsp;&#8209;&nbsp;Build&nbsp;step</a></li><li><a href="#/NaN">Webpack</a></li><li><a href="#/NaN">Exercise&nbsp;&#8209;&nbsp;Webpack</a></li><li><a href="#/NaN">Distribution&nbsp;files</a></li><li><a href="#/NaN">Exercise&nbsp;&#8209;&nbsp;Distribution</a></li>
    </ol>
  </div>
</section>
<!--ENDSECTIONINDEX-->
        <!--STARTCHAPTERCONTENT--><!--STARTSECTION1--><section>
  <section class="slide sectiontitle">
    <div class="slidecontent">
      <div class='sectioncount'>Section 1/8</div>
      <h3>CSS preprocessing</h3>
      <p>bells and whistles</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="4-1-1">
<span class="pos">4-1-1</span>
<div class="slidecontent"><p>Although CSS has grown more powerful, there is still <strong>a lot to be desired</strong>:</p>
<ul>
<li><strong>variables</strong></li>
<li><strong>computations</strong></li>
<li><strong>mixins</strong></li>
<li><strong>nested declarations</strong></li>
</ul>
</div></section>
<section class="slide" data-pos="4-1-2">
<span class="pos">4-1-2</span>
<div class="slidecontent"><p>This has driven many to try to <strong>add a layer on top of CSS</strong>. The two most popular solutions are <strong>SASS and LESS</strong>.</p>
<div class="equality">
  <img src="resources/images/sass.svg" alt="js">
  <span></span>
  <img src="resources/images/less.png" alt="heart">
</div>


<p>Read more at <a href="http://sass-lang.com/">http://sass-lang.com/</a> and <a href="http://lesscss.org/">http://lesscss.org/</a>.</p>
</div></section>
<section class="slide" data-pos="4-1-3">
<span class="pos">4-1-3</span>
<div class="slidecontent"><p>The idea is that we write in a language that <strong>compiles down to regular CSS</strong>.</p>
<p><img src="resources/diagrams/css-compile.svg" alt=""></p>
<p>In other words you will be editing a <code>.less</code> or <code>.sass</code> file, and from that generate a <code>.css</code> file that you serve to the client.</p>
</div></section>
<section class="slide" data-pos="4-1-4">
<span class="pos">4-1-4</span>
<div class="slidecontent"><p>For example, this LESS code:</p>
<pre><code class="lang-less"><span class="hljs-variable">@bgcolor:</span> <span class="hljs-number">#f938ab</span>;

<span class="hljs-selector-class">.sidebar</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-variable">@bgcolor</span>;
  <span class="hljs-selector-tag">&amp;</span> <span class="hljs-selector-tag">h2</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span> * <span class="hljs-number">2</span> / <span class="hljs-number">3</span>;
  }
}
</code></pre>
</div></section>
<section class="slide" data-pos="4-1-5">
<span class="pos">4-1-5</span>
<div class="slidecontent"><p>...<strong>translates</strong> to this <strong>CSS</strong>:</p>
<pre><code class="lang-css"><span class="hljs-selector-class">.sidebar</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f938ab</span>;
}

<span class="hljs-selector-class">.sidebar</span> <span class="hljs-selector-tag">h2</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">66.66666667%</span>
}
</code></pre>
</div></section>
</section>
<!--ENDSECTION1-->
<!--STARTSECTION2--><section>
  <section class="slide sectiontitle">
    <div class="slidecontent">
      <div class='sectioncount'>Section 2/8</div>
      <h3>Exercise - LESS</h3>
      
    </div>
  </section>
  <section class="slide" data-pos="4-2-1">
<span class="pos">4-2-1</span>
<div class="slidecontent"><div class="goal"></div>

<p>Goal: Style our app with LESS</p>
</div></section>
<section class="slide list" data-pos="4-2-2">
<span class="pos">4-2-2</span>
<div class="slidecontent">
<p>Battleplan:</p>
<ul>
<li><span>a</span>install LESS globally</li>
<li><span>b</span>add a LESS file</li>
<li><span>c</span>use LESS syntax</li>
<li><span>d</span>compile LESS to CSS</li>
</ul>
</div></section>
<section class="slide num numA" data-pos="4-2-3">
<span class="pos">4-2-3</span>
<div class="slidecontent">
<p>First we <strong>install LESS globally</strong>! Type this in a terminal:</p>
<pre><code>npm <span class="hljs-keyword">install</span> -g <span class="hljs-keyword">less</span>
</code></pre><p>You might have to <strong>run the terminal as administrator</strong> to be allowed to do this.</p>
</div></section>
<section class="slide" data-pos="4-2-4">
<span class="pos">4-2-4</span>
<div class="slidecontent"><p>Then try typing this in <strong>any terminal</strong>:</p>
<pre><code><span class="hljs-attribute">lessc -v</span>
</code></pre><p>If you see a LESS version number, you&#39;re ok!</p>
</div></section>
<section class="slide num numB" data-pos="4-2-5">
<span class="pos">4-2-5</span>
<div class="slidecontent">
<p>Now we need to <strong>add a LESS file</strong>! Simply <strong>copy the CSS file</strong> in your project, and give the copy the ending <code>.less</code> instead.</p>
<p><img src="resources/images/lessfile.png" alt=""></p>
</div></section>
<section class="slide num numC" data-pos="4-2-6">
<span class="pos">4-2-6</span>
<div class="slidecontent">
<p>This is all pointless unless we <strong>use some LESS syntax</strong>!</p>
<p>Look up a feature you like (variables are easy), and <strong>use it in the LESS file</strong>!</p>
</div></section>
<section class="slide num numD" data-pos="4-2-7">
<span class="pos">4-2-7</span>
<div class="slidecontent">
<p>Now we must <strong>generate the CSS file</strong>! In a terminal, navigate to the project folder and type:</p>
<pre><code><span class="hljs-selector-tag">lessc</span> <span class="hljs-selector-tag">styles</span><span class="hljs-selector-class">.less</span> <span class="hljs-selector-tag">styles</span><span class="hljs-selector-class">.css</span>
</code></pre><p>You might have to <strong>tweak according to your exact file names</strong>.</p>
</div></section>
<section class="slide" data-pos="4-2-8">
<span class="pos">4-2-8</span>
<div class="slidecontent"><p>After this command, notice that the <code>styles.css</code> file will change accordingly!</p>
</div></section>
<section class="slide" data-pos="4-2-9">
<span class="pos">4-2-9</span>
<div class="slidecontent"><p>You&#39;ll <strong>redo this process</strong> every time you make a change to the LESS file.</p>
<p>(unless you add a watcher!)</p>
</div></section>
<section class="slide" data-pos="4-2-10">
<span class="pos">4-2-10</span>
<div class="slidecontent"><div class="checklist"></div>

<p>You are done when...</p>
<ul>
<li>The styles are controlled from a LESS file</li>
<li>The app still looks as expected in the browser</li>
</ul>
</div></section>
</section>
<!--ENDSECTION2-->
<!--STARTSECTION3--><section>
  <section class="slide sectiontitle">
    <div class="slidecontent">
      <div class='sectioncount'>Section 3/8</div>
      <h3>Package.JSON</h3>
      <p>The heart</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="4-3-1">
<span class="pos">4-3-1</span>
<div class="slidecontent"><p>Let&#39;s take a closer look at npm! We acces it with the <code>npm</code> command through Node.js:</p>
<pre><code class="lang-bash">$ npm

  Usage: npm &lt;<span class="hljs-built_in">command</span>&gt;
</code></pre>
</div></section>
<section class="slide list" data-pos="4-3-2">
<span class="pos">4-3-2</span>
<div class="slidecontent">
<p>The npm revolves around the <strong><code>package.json</code> file</strong>. Let&#39;s explore that! Specifically, we&#39;ll look at:</p>
<ul>
<li><span>a</span>install packages globally</li>
<li><span>b</span>initiate a <code>package.json</code> file</li>
<li><span>c</span>track dependencies</li>
<li><span>d</span>semantic versioning</li>
<li><span>e</span>development dependencies</li>
<li><span>f</span>scripts</li>
</ul>
</div></section>
<section class="slide num numA" data-pos="4-3-3">
<span class="pos">4-3-3</span>
<div class="slidecontent">
<p>To <strong>install a package</strong> you just type:</p>
<pre><code>npm <span class="hljs-keyword">install</span> react
</code></pre><p>This will generate a <code>node_modules</code> folder with react and all its
dependencies, if any.</p>
<p><em>Hint: You probably want to ignore this folder in your VCS</em></p>
</div></section>
<section class="slide" data-pos="4-3-4">
<span class="pos">4-3-4</span>
<div class="slidecontent"><p>Packages can also be installed globally:</p>
<pre><code class="lang-bash">$ npm install -g eslint
</code></pre>
</div></section>
<section class="slide num numB" data-pos="4-3-5">
<span class="pos">4-3-5</span>
<div class="slidecontent">
<p>We can setup a <strong><code>package.json</code></strong> file to <strong>track dependencies in our project</strong>, as well as do <strong>other configurations</strong>.</p>
</div></section>
<section class="slide" data-pos="4-3-6">
<span class="pos">4-3-6</span>
<div class="slidecontent"><p><strong>Getting started</strong> with a new project is simple:</p>
<pre><code class="lang-bash">npm init
</code></pre>
<p>This initializes the folder as an Node.js project by <strong>creating a package.json in it</strong>.</p>
</div></section>
<section class="slide" data-pos="4-3-7">
<span class="pos">4-3-7</span>
<div class="slidecontent"><p>The result, after you have answered a bunch of questions, might look something like:</p>
<pre><code class="lang-json">{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Install dependencies example"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Project description"</span>,
  <span class="hljs-attr">"dependencies"</span>: {},
  <span class="hljs-attr">"devDependencies"</span>: {},
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"test"</span>: <span class="hljs-string">"echo \"We have no tests yet\""</span>
  },
  <span class="hljs-attr">"author"</span>: <span class="hljs-string">"Eric Lavesson"</span>,
  <span class="hljs-attr">"license"</span>: <span class="hljs-string">"ISC"</span>
}
</code></pre>
</div></section>
<section class="slide num numC" data-pos="4-3-8">
<span class="pos">4-3-8</span>
<div class="slidecontent">
<p>Using the <code>--save</code> flag we can <strong>track dependencies</strong> in our <code>package.json</code>.</p>
<pre><code>npm <span class="hljs-keyword">install</span> <span class="hljs-comment">--save react</span>
</code></pre><ul>
<li>As of npm 5.0.0 <code>--save</code> is the default behaviour.</li>
</ul>
</div></section>
<section class="slide" data-pos="4-3-9">
<span class="pos">4-3-9</span>
<div class="slidecontent"><p>Here&#39;s the <code>package.json</code> file after the saved dependency (shortened for convenience):</p>
<pre><code class="lang-json">{
  <span class="hljs-attr">"dependencies"</span>: {
      <span class="hljs-attr">"react"</span>: <span class="hljs-string">"^15.3.2"</span>
  },
  <span class="hljs-attr">"devDependencies"</span>: {},
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"test"</span>: <span class="hljs-string">"echo \"We have no tests yet\""</span>
  }
}
</code></pre>
<p>Note how <code>react</code> is now listed as a dependency.</p>
</div></section>
<section class="slide num numD" data-pos="4-3-10">
<span class="pos">4-3-10</span>
<div class="slidecontent">
<p>npm uses <strong>Semantic versioning</strong> (also called <strong>semver</strong>)</p>
<p>A &quot;version&quot; is described as a string, such as <code>1.2.3</code>, where:</p>
<pre><code><span class="hljs-symbol">1 </span>- MAJOR (incompatible API changes)
<span class="hljs-symbol">2 </span>- MINOR (<span class="hljs-keyword">new</span> functionality, backwards compatible) 
<span class="hljs-symbol">3 </span>- PATCH (patches <span class="hljs-keyword">and</span> bugfixes)
</code></pre></div></section>
<section class="slide" data-pos="4-3-11">
<span class="pos">4-3-11</span>
<div class="slidecontent"><p>In your <code>package.json</code> (and also when installing, you can specify a
semver, together with one of several comparators. A few common examples
include:</p>
<pre><code>&gt;=<span class="hljs-number">1.2</span><span class="hljs-number">.3</span>     # Anything greater than or equal to this version

=<span class="hljs-number">1.2</span><span class="hljs-number">.3</span>      # Exactly this version

^<span class="hljs-number">1.2</span><span class="hljs-number">.3</span>      # Accept the latest major version
            # (<span class="hljs-number">1.3</span><span class="hljs-number">.0</span> OK, but not <span class="hljs-number">2.0</span><span class="hljs-number">.0</span>)

~<span class="hljs-number">1.2</span><span class="hljs-number">.3</span>      # Accept the latest minor version
            # (<span class="hljs-number">1.2</span><span class="hljs-number">.4</span> OK, but not <span class="hljs-number">1.3</span><span class="hljs-number">.0</span>)
</code></pre></div></section>
<section class="slide" data-pos="4-3-12">
<span class="pos">4-3-12</span>
<div class="slidecontent"><p>There&#39;s a giant heap of these. Check the following URL for the spec:</p>
<p><a href="https://docs.npmjs.com/misc/semver">https://docs.npmjs.com/misc/semver</a></p>
</div></section>
<section class="slide num numE" data-pos="4-3-13">
<span class="pos">4-3-13</span>
<div class="slidecontent">
<p>We can mark some dependencies as <strong>development-specific</strong> with the <code>--save-dev</code> flag:</p>
<pre><code>npm install --<span class="hljs-built_in">save</span>-<span class="hljs-built_in">dev</span> mocha
</code></pre></div></section>
<section class="slide" data-pos="4-3-14">
<span class="pos">4-3-14</span>
<div class="slidecontent"><p>Let&#39;s look at the resulting <code>package.json</code>:</p>
<pre><code class="lang-json">{
  <span class="hljs-attr">"dependencies"</span>: {
      <span class="hljs-attr">"react"</span>: <span class="hljs-string">"^15.3.2"</span>
  },
  <span class="hljs-attr">"devDependencies"</span>: {
      <span class="hljs-attr">"mocha"</span>: <span class="hljs-string">"^3.1.2"</span>
  },
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"test"</span>: <span class="hljs-string">"echo \"We have no tests yet\""</span>
  }
}
</code></pre>
</div></section>
<section class="slide question" data-pos="4-3-15">
<span class="pos">4-3-15</span>
<div class="slidecontent">
<p>I just cloned a repo with a <code>package.json</code> file. Since the <code>node_modules</code> folder is ignored, how do I actually install the dependencies?</p>
</div></section>
<section class="slide answer" data-pos="4-3-16">
<span class="pos">4-3-16</span>
<div class="slidecontent">
<p>Simple. You just run <code>npm install</code>!</p>
<p>This command will download all the <code>dependencies</code> and <code>devDependencies</code> and place them in a <code>node_modules</code> folder.</p>
</div></section>
<section class="slide num numF" data-pos="4-3-17">
<span class="pos">4-3-17</span>
<div class="slidecontent">
<p>Runnable <strong>scripts</strong> can be added as a <code>scripts</code> property in <code>package.json</code></p>
<pre><code class="lang-json">{
  <span class="hljs-attr">"dependencies"</span>: {},
  <span class="hljs-attr">"devDependencies"</span>: {},
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"printme"</span>: <span class="hljs-string">"echo \"This is a meaningless script\""</span>
  }
}
</code></pre>
</div></section>
<section class="slide" data-pos="4-3-18">
<span class="pos">4-3-18</span>
<div class="slidecontent"><p>Once a script is registered like that, we can run it like this:</p>
<pre><code>npm <span class="hljs-keyword">run</span><span class="bash"> printme</span>
</code></pre><p>This just runs our pointless command that we defined in <code>printme</code>. You&#39;ll use it for more useful stuff in the build step coming in later!</p>
</div></section>
</section>
<!--ENDSECTION3-->
<!--STARTSECTION4--><section>
  <section class="slide sectiontitle">
    <div class="slidecontent">
      <div class='sectioncount'>Section 4/8</div>
      <h3>Exercise - Build step</h3>
      <p>Plugging in the pipe</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="4-4-1">
<span class="pos">4-4-1</span>
<div class="slidecontent"><div class="goal"></div>

<p>Goal: define building and dependencies in the project</p>
</div></section>
<section class="slide" data-pos="4-4-2">
<span class="pos">4-4-2</span>
<div class="slidecontent"><p>Currently our project has <strong>two big downsides</strong>:</p>
<ul>
<li>LESS must be <strong>globally installed</strong></li>
<li>You must <strong>know how to generate</strong> the CSS file</li>
</ul>
<p>Let&#39;s fix this!</p>
</div></section>
<section class="slide list" data-pos="4-4-3">
<span class="pos">4-4-3</span>
<div class="slidecontent">
<ul>
<li><span>a</span>Add a <code>package.json</code> file</li>
<li><span>b</span>Add <code>less</code> as a local devDep</li>
<li><span>c</span>Add a <code>.gitignore</code> file to prevent tracking of <code>node_modules</code></li>
<li><span>d</span>Add a buildscript</li>
</ul>
</div></section>
<section class="slide num numA" data-pos="4-4-4">
<span class="pos">4-4-4</span>
<div class="slidecontent">
<p>Create a package.json by typing...</p>
<pre><code class="lang-bash">npm init
</code></pre>
<p>...in the root of your project!</p>
</div></section>
<section class="slide num numB" data-pos="4-4-5">
<span class="pos">4-4-5</span>
<div class="slidecontent">
<p>Now let&#39;s <strong>add <code>less</code> as a local development dependency</strong>:</p>
<pre><code>npm <span class="hljs-keyword">install</span> --save-dev <span class="hljs-keyword">less</span>
</code></pre></div></section>
<section class="slide num numC" data-pos="4-4-6">
<span class="pos">4-4-6</span>
<div class="slidecontent">
<p>Because we have local dependencies, we now have a <strong><code>node_modules</code></strong> folder.</p>
<p><img src="resources/images/nodemodules.png" alt=""></p>
<p>Since this is just 3rd party code, we <strong>don&#39;t want to track it</strong> with Git!</p>
</div></section>
<section class="slide" data-pos="4-4-7">
<span class="pos">4-4-7</span>
<div class="slidecontent"><p>We prevent this by <strong>adding a <code>.gitignore</code> file</strong> in the root of our folder.</p>
<p><img src="resources/images/gitignore.png" alt=""></p>
</div></section>
<section class="slide" data-pos="4-4-8">
<span class="pos">4-4-8</span>
<div class="slidecontent"><p>This file should contain <strong>paths to all files and directories</strong> that we wish to <strong>ignore</strong>. So far, that&#39;s just the node modules directory!</p>
<pre><code>node_modules
</code></pre></div></section>
<section class="slide num numD" data-pos="4-4-9">
<span class="pos">4-4-9</span>
<div class="slidecontent">
<p>Let&#39;s now register a <strong>local command</strong> to <strong>generate our less file</strong>:</p>
<pre><code class="lang-bash">{
  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"styles"</span>: <span class="hljs-string">"lessc styles.less styles.css"</span>
  }
}
</code></pre>
<p>Of course, make sure the names match your CSS file.</p>
</div></section>
<section class="slide" data-pos="4-4-10">
<span class="pos">4-4-10</span>
<div class="slidecontent"><p>Now, in a terminal in the project folder, try...</p>
<pre><code class="lang-bash">npm run styles
</code></pre>
<p>...and make sure the CSS file is properly regenerated!</p>
</div></section>
<section class="slide" data-pos="4-4-11">
<span class="pos">4-4-11</span>
<div class="slidecontent"><div class="checklist"></div>

<p>You are done when...</p>
<ul>
<li>LESS is locally installed (in <code>node_modules/less</code>)</li>
<li><code>node_modules</code> isn&#39;t tracked by Git</li>
<li>Typing <code>npm run styles</code> regenerates the CSS</li>
</ul>
</div></section>
</section>
<!--ENDSECTION4-->
<!--STARTSECTION5--><section>
  <section class="slide sectiontitle">
    <div class="slidecontent">
      <div class='sectioncount'>Section 5/8</div>
      <h3>Webpack</h3>
      
    </div>
  </section>
  <section class="slide" data-pos="4-5-1">
<span class="pos">4-5-1</span>
<div class="slidecontent"><p>Time to get to know one of the <strong>most important tools</strong>:</p>
<div style="background-color: white;">
<img src="resources/images/webpack.png" alt="">
</div></div></section>
<section class="slide list" data-pos="4-5-2">
<span class="pos">4-5-2</span>
<div class="slidecontent">
<p><a href="https://webpack.js.org/">Webpack</a> solves a whole range of problems:</p>
<ul>
<li><span>a</span>it <strong>lets us use modules</strong>...</li>
<li><span>b</span>because it <strong>bundles our code</strong> into a single file</li>
<li><span>c</span>it can also do <strong>other transpilings</strong></li>
</ul>
</div></section>
<section class="slide num numA" data-pos="4-5-3">
<span class="pos">4-5-3</span>
<div class="slidecontent">
<p>Webpack lets us <strong>use Node module syntax in our code</strong>. This means that instead of splitting our code into files and then <strong>including them all in script elements</strong> (which means they all execute in the same scope), we can <strong>use proper modules</strong>!</p>
</div></section>
<section class="slide" data-pos="4-5-4">
<span class="pos">4-5-4</span>
<div class="slidecontent"><p>So instead of <strong>creating a global variable</strong> in <code>data.js</code>...</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> movieData = {
  <span class="hljs-attr">title</span>: <span class="hljs-string">'Inception'</span>, <span class="hljs-comment">// etc</span>
};
</code></pre>
<p>...and then <strong>magically be able to reference that</strong> in <code>code.js</code>...</p>
<pre><code class="lang-javascript">renderMovie(movieData);
</code></pre>
</div></section>
<section class="slide" data-pos="4-5-5">
<span class="pos">4-5-5</span>
<div class="slidecontent"><p>...we can <strong>explicitly export it</strong> in <code>data.js</code>...</p>
<pre><code><span class="hljs-keyword">module</span>.<span class="hljs-keyword">exports</span> = {
  title: <span class="hljs-string">'Inception'</span>, <span class="hljs-comment">// etc</span>
}
</code></pre><p>...and <strong>import it</strong> in <code>code.js</code>:</p>
<pre><code>let movieData = require(<span class="hljs-string">"./data"</span>)<span class="hljs-comment">;</span>

renderMovie(<span class="hljs-name">movieData</span>)<span class="hljs-comment">;</span>
</code></pre></div></section>
<section class="slide" data-pos="4-5-6">
<span class="pos">4-5-6</span>
<div class="slidecontent"><p>Note that we <strong>have to write the path as <code>&quot;./data&quot;</code></strong>.</p>
<p>If we write it as <code>&quot;data&quot;</code>, npm will assume we mean a <strong>3rd party module within <code>node_modules</code></strong> and look there instead!</p>
</div></section>
<section class="slide" data-pos="4-5-7">
<span class="pos">4-5-7</span>
<div class="slidecontent"><p>Working with modules in this way has many advantages;</p>
<ul>
<li>It becomes <strong>clear what a file exports and imports</strong></li>
<li>Files are executed in <strong>separate scopes</strong></li>
<li>Webpack can <strong>bundle it all into a single file</strong>, which we&#39;ll soon see!</li>
</ul>
</div></section>
<section class="slide" data-pos="4-5-8">
<span class="pos">4-5-8</span>
<div class="slidecontent"><p>Note that there is also an <strong>ES6 version</strong> of the module syntax. In <strong><code>data.js</code></strong> we&#39;d <strong>export</strong> it like so...</p>
<pre><code><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> movieData = {
  title: <span class="hljs-string">'Inception'</span>, <span class="hljs-comment">// etc</span>
};
</code></pre><p>...and then in <code>code.js</code> we&#39;d <strong>import</strong> like this:</p>
<pre><code><span class="hljs-keyword">import</span> {movieData} <span class="hljs-keyword">from</span> <span class="hljs-string">'./data'</span>;

renderMovie(movieData);
</code></pre></div></section>
<section class="slide num numB" data-pos="4-5-9">
<span class="pos">4-5-9</span>
<div class="slidecontent">
<p>The <strong>bundling into a single file</strong> is at the core of Webpack. It requires us to <strong>use a module setup</strong> as described above.</p>
<p>With such as setup we&#39;d <strong>point Webpack to the entry file</strong>. It&#39;ll then start there, <strong>dynamically follow all require calls</strong>, and bundle up everything into a <strong>single file</strong>.</p>
</div></section>
<section class="slide" data-pos="4-5-10">
<span class="pos">4-5-10</span>
<div class="slidecontent"><p>We do this in a <strong>configuration file</strong> with the magical name <strong><code>webpack.config.js</code></strong>. This file should <strong>export a config object</strong>:</p>
<pre><code><span class="hljs-keyword">module</span>.<span class="hljs-keyword">exports</span> = {
  entry: <span class="hljs-string">'./code.js'</span>,
  output: {
    filename: <span class="hljs-string">'bundle.js'</span>
  }
};
</code></pre><p>There are of course <strong>many more config options</strong>!</p>
</div></section>
<section class="slide num numC" data-pos="4-5-11">
<span class="pos">4-5-11</span>
<div class="slidecontent">
<p>Via <strong>plugins</strong>, Webpack can also do a whole bunch of <strong>other conversions</strong> while it&#39;s at it. This might include...</p>
<ul>
<li>turning smart JS to dumb via <a href="https://babeljs.io/">Babel</a> or something similar</li>
<li>inlining images</li>
<li>minifying/uglifying</li>
<li>dealing with text resources</li>
<li>...and a whole bunch of other things!</li>
</ul>
</div></section>
</section>
<!--ENDSECTION5-->
<!--STARTSECTION6--><section>
  <section class="slide sectiontitle">
    <div class="slidecontent">
      <div class='sectioncount'>Section 6/8</div>
      <h3>Exercise - Webpack</h3>
      
    </div>
  </section>
  <section class="slide" data-pos="4-6-1">
<span class="pos">4-6-1</span>
<div class="slidecontent"><div class="goal"></div>

<p>Goal: bundle our code with webpack</p>
</div></section>
<section class="slide list" data-pos="4-6-2">
<span class="pos">4-6-2</span>
<div class="slidecontent">
<p>Here&#39;s the plan!</p>
<ul>
<li><span>a</span>turn <code>data.js</code> into exported</li>
<li><span>b</span>add <code>jquery</code> as local dependency</li>
<li><span>c</span>add <code>webpack</code> as local development dependency</li>
<li><span>d</span>configure webpack</li>
<li><span>e</span>add script to run webpack</li>
<li><span>f</span>update <code>index.html</code></li>
</ul>
</div></section>
<section class="slide" data-pos="4-6-3">
<span class="pos">4-6-3</span>
<div class="slidecontent"><p>Lots of steps, but don&#39;t fret - most of them are very simple, promise! :)</p>
</div></section>
<section class="slide num numA" data-pos="4-6-4">
<span class="pos">4-6-4</span>
<div class="slidecontent">
<p>Right now <strong><code>data.js</code></strong> simply <strong>declares a variable</strong> which we&#39;ll then magically use in another file.</p>
<p>Let&#39;s stop this, and instead make <code>data.js</code> explicitly <strong>export the variable</strong>! There are code examples in the previous section.</p>
</div></section>
<section class="slide" data-pos="4-6-5">
<span class="pos">4-6-5</span>
<div class="slidecontent"><p>Then turn your attention to <strong><code>code.js</code></strong> and make it <strong>import the variable from <code>data.js</code></strong>, instead of just assuming that the variable is magically present.</p>
</div></section>
<section class="slide num numB" data-pos="4-6-6">
<span class="pos">4-6-6</span>
<div class="slidecontent">
<p>Let&#39;s add jQuery as a local dependency!</p>
<pre><code class="lang-bash">npm install --save jquery
</code></pre>
</div></section>
<section class="slide" data-pos="4-6-7">
<span class="pos">4-6-7</span>
<div class="slidecontent"><p>Again you have to <strong>update <code>code.js</code></strong> to import <code>jquery</code> instead of just assuming it exists.</p>
</div></section>
<section class="slide num numC" data-pos="4-6-8">
<span class="pos">4-6-8</span>
<div class="slidecontent">
<p>Next we need to <strong>import webpack as a local development dependency</strong>!</p>
<pre><code class="lang-bash">npm install --save-dev webpack
</code></pre>
</div></section>
<section class="slide num numD" data-pos="4-6-9">
<span class="pos">4-6-9</span>
<div class="slidecontent">
<p>The configuration for webpack lives in a separate <strong><code>webpack.config.js</code></strong> file. </p>
<p>Add such a file, and see the former section for what it should contain!</p>
</div></section>
<section class="slide num numE" data-pos="4-6-10">
<span class="pos">4-6-10</span>
<div class="slidecontent">
<p>Now that webpack is present and configured we can <strong>add a script</strong> to <code>package.json</code> to run it. Let&#39;s call it <strong><code>bundle</code></strong>!</p>
<pre><code>  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"styles"</span>: <span class="hljs-string">"lessc styles.less styles.css"</span>,
    <span class="hljs-string">"bundle"</span>: <span class="hljs-string">"webpack"</span>
  },
</code></pre></div></section>
<section class="slide" data-pos="4-6-11">
<span class="pos">4-6-11</span>
<div class="slidecontent"><p>Try it by typing <code>npm run bundle</code> in the terminal, and see if <code>bundle.js</code> appears as expected!</p>
</div></section>
<section class="slide num numF" data-pos="4-6-12">
<span class="pos">4-6-12</span>
<div class="slidecontent">
<p>As the very final step, let&#39;s <strong>update <code>index.html</code></strong> to use our new setup.</p>
<p>This means...</p>
<ul>
<li><strong>removing all existing script elements</strong></li>
<li><strong>adding a new one for <code>bundle.js</code></strong></li>
</ul>
</div></section>
<section class="slide" data-pos="4-6-13">
<span class="pos">4-6-13</span>
<div class="slidecontent"><div class="checklist"></div>

<p>You are done when...</p>
<ul>
<li>Doing <code>npm run bundle</code> generates a <code>bundle.js</code></li>
<li>That&#39;s the only script file in <code>index.html</code></li>
<li>The app still works like before</li>
</ul>
</div></section>
</section>
<!--ENDSECTION6-->
<!--STARTSECTION7--><section>
  <section class="slide sectiontitle">
    <div class="slidecontent">
      <div class='sectioncount'>Section 7/8</div>
      <h3>Distribution files</h3>
      <p>Made to order</p>
</p>
    </div>
  </section>
  <section class="slide question" data-pos="4-7-1">
<span class="pos">4-7-1</span>
<div class="slidecontent">
<p>Two of these files are <strong>special</strong>. Which?</p>
<p><img src="resources/images/differentfilesquestion.png" alt=""></p>
</div></section>
<section class="slide answer" data-pos="4-7-2">
<span class="pos">4-7-2</span>
<div class="slidecontent">
<p>These! They alone are <strong>generated</strong> from the rest:</p>
<p><img src="resources/images/differentfilesanswer.png" alt=""></p>
</div></section>
<section class="slide" data-pos="4-7-3">
<span class="pos">4-7-3</span>
<div class="slidecontent"><p>We <strong>don&#39;t want to track generated files</strong>, and we <strong>don&#39;t really want to mix them with our source files</strong>.</p>
<p>But, it is the <strong>generated files</strong> that we want to <strong>serve to the client</strong>, and <strong>not our source files</strong>!</p>
</div></section>
<section class="slide" data-pos="4-7-4">
<span class="pos">4-7-4</span>
<div class="slidecontent"><p>This is what a <strong>proper build step</strong> should take care of; it should <strong>generate a directory</strong> containing <strong>everything the client needs</strong>. This directory should <strong>not contain anything not needed</strong>, but only the stuff that is needed to run the app.</p>
</div></section>
<section class="slide" data-pos="4-7-5">
<span class="pos">4-7-5</span>
<div class="slidecontent"><p>And, by peculiar chance, you&#39;ll now get to <strong>set up generating such a folder</strong>! :)</p>
</div></section>
</section>
<!--ENDSECTION7-->
<!--STARTSECTION8--><section>
  <section class="slide sectiontitle">
    <div class="slidecontent">
      <div class='sectioncount'>Section 8/8</div>
      <h3>Exercise - Distribution</h3>
      <p>An ACTUAL build step, at last!</p>
</p>
    </div>
  </section>
  <section class="slide" data-pos="4-8-1">
<span class="pos">4-8-1</span>
<div class="slidecontent"><div class="goal"></div>

<p>Goal: Have a deployable <code>distribution</code> folder without source files</p>
</div></section>
<section class="slide list" data-pos="4-8-2">
<span class="pos">4-8-2</span>
<div class="slidecontent">
<p>Here&#39;s the plan:</p>
<ul>
<li><span>a</span><strong>tweak webpack</strong> to output into distribution folder</li>
<li><span>b</span><strong>tweak less</strong> to output into distribution folder</li>
<li><span>c</span>add script to <strong>copy <code>index.html</code></strong> into distribution folder</li>
<li><span>d</span>make Git <strong>ignore distribution folder</strong></li>
<li><span>e</span>add <strong>build script</strong> that runs all other scripts</li>
</ul>
</div></section>
<section class="slide num numA" data-pos="4-8-3">
<span class="pos">4-8-3</span>
<div class="slidecontent">
<p>We need to <strong>change webpack</strong> so that it <strong>outputs the bundle into the distribution folder</strong> instead.</p>
<p>Simple change the output filename into <code>distribution/bundle.js</code>!</p>
</div></section>
<section class="slide num numB" data-pos="4-8-4">
<span class="pos">4-8-4</span>
<div class="slidecontent">
<p>Similarly, <strong>tweak the less script</strong> to output to <code>distribution/styles.css</code> instead of just <code>styles.css</code>.</p>
</div></section>
<section class="slide num numC" data-pos="4-8-5">
<span class="pos">4-8-5</span>
<div class="slidecontent">
<p>We want to <strong>keep <code>index.html</code> among our tracked source files</strong>.</p>
<p>But at the same time we <strong>need it inside the distribution folder</strong>!</p>
</div></section>
<section class="slide" data-pos="4-8-6">
<span class="pos">4-8-6</span>
<div class="slidecontent"><p>We solve this via <strong>adding a simple copying script</strong> to <code>package.json</code>:</p>
<pre><code>  <span class="hljs-string">"copyindex"</span>: <span class="hljs-string">"cd index.html distribution/index.html"</span>
</code></pre><p>Run <code>npm run copyindex</code> in the terminal to see if it works!</p>
</div></section>
<section class="slide num numD" data-pos="4-8-7">
<span class="pos">4-8-7</span>
<div class="slidecontent">
<p>The <code>distribution</code> folder is now full of generated files, which we <strong>don&#39;t want to track</strong>. </p>
<p>Add the whole folder to the <code>.gitignore</code> file!</p>
</div></section>
<section class="slide num numE" data-pos="4-8-8">
<span class="pos">4-8-8</span>
<div class="slidecontent">
<p>As a final step, let&#39;s <strong>add a <code>build</code> script</strong> that runs all other scripts.</p>
<pre><code>  <span class="hljs-string">"build"</span>: <span class="hljs-string">"npm run bundle &amp;&amp; npm run less &amp;&amp; npm run copyindex"</span>
</code></pre><p>Try it out, and see if the <code>distribution</code> folder is populated as expected.</p>
</div></section>
<section class="slide" data-pos="4-8-9">
<span class="pos">4-8-9</span>
<div class="slidecontent"><div class="checklist"></div>

<p>You are done when...</p>
<ul>
<li>There&#39;s a <code>distribution</code> folder</li>
<li>That folder contains no source files</li>
<li>You can copy just that folder somewhere else and the app still works</li>
</ul>
</div></section>
</section>
<!--ENDSECTION8--><!--ENDCHAPTERCONTENT-->
        

      </div>
    </div>

    <script type="text/javascript">
      var basehref = window.location.href.replace(/chapter\d.*?$/,'')

      document.addEventListener("keydown",function(e){
        var code = e.which || e.keyCode;
        if (code===13){
          window.location.href = basehref+"index.html?from="+(4-1);
        } else if (code >= 49 && code <= 8+48) {
          window.location.hash = "#/" + (code-48+1+0);
        }
        if (4 < 6) {
          if (code===99){ // the letter C for next Chapter
            window.location.href = basehref+"chapter"+(4+1)+".html"
          }
        }
      });
    </script>
    <script src="mc2/scripts/head.js" type="text/javascript"></script>
    <script src="mc2/scripts/reveal.js" type="text/javascript"></script>
    <script src="mc2/scripts/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">

  Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: true,
    showNotes: false,
    transition: 'slide',
    dependencies: [
      { src: 'mc2/scripts/plugin/notes/notes.js', async: true }
    ]
  })

    window.onload = function(){

      var links = document.querySelectorAll("a.link");
      for(var i=0;i<links.length;i++){
        var link = links[i];
        link.innerHTML = link.innerHTML.replace(/ /g,'&nbsp;')
      }
      var posElem = document.getElementById('pos')
      function updateReference(){
        setTimeout(function(){
          var currentpos = document.querySelector('section.present[data-pos]')
          if (currentpos){
            posElem.innerHTML = currentpos.getAttribute('data-pos')
          } else {
            posElem.innerHTML = ''
          }
          if (document.querySelector('.present.chaptertitle')){
            document.body.classList.add('atchaptertitle');
          } else {
            document.body.classList.remove('atchaptertitle');
          }
        },10)
      }

      window.addEventListener("hashchange",updateReference);

      updateReference();
    };

    </script>
    <!--STARTCOURSESPECIFICSCRIPTS--><!--ENDCOURSESPECIFICSCRIPTS-->
  </body>
</html>
